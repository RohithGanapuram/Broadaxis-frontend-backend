2025-08-26 16:34:02,261 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 16:34:07,320 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 16:34:17,578 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 16:38:24,397 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 19:17:45,885 - BroadAxis - ERROR - Error occurred: {'error_type': 'WebSocketDisconnect', 'message': "(1001, '')", 'context': {'session_id': 'ws_1778749663104_1756246085', 'operation': 'websocket_message_handling'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 52, in websocket_chat\n    data = await asyncio.wait_for(websocket.receive_text(), timeout=300.0)  # 5 min timeout\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 507, in wait_for\n    return await fut\n           ^^^^^^^^^\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 120, in receive_text\n    self._raise_on_disconnect(message)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 114, in _raise_on_disconnect\n    raise WebSocketDisconnect(message["code"], message.get("reason"))\nstarlette.websockets.WebSocketDisconnect: (1001, \'\')\n'}
2025-08-26 19:18:01,898 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 19:18:03,910 - BroadAxis - ERROR - Error occurred: {'error_type': 'WebSocketDisconnect', 'message': '', 'context': {'operation': 'websocket_send_message'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 1279, in close_connection\n    await self.transfer_data_task\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 286, in __await__\n    yield self  # This tells Task to wait for completion.\n    ^^^^^^^^^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 375, in __wakeup\n    future.result()\n    ~~~~~~~~~~~~~^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 194, in result\n    raise self._make_cancelled_error()\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 306, in __step_run_and_handle_result\n    result = coro.throw(exc)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 956, in transfer_data\n    await asyncio.shield(self._put_message_waiter)\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 286, in __await__\n    yield self  # This tells Task to wait for completion.\n    ^^^^^^^^^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 375, in __wakeup\n    future.result()\n    ~~~~~~~~~~~~~^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 194, in result\n    raise self._make_cancelled_error()\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\uvicorn\\protocols\\websockets\\websockets_impl.py", line 332, in asgi_send\n    await self.send(data)  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 620, in send\n    await self.ensure_open()\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 921, in ensure_open\n    raise self.connection_closed_exc()\nwebsockets.exceptions.ConnectionClosedError: sent 1011 (internal error) keepalive ping timeout; no close frame received\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 86, in send\n    await self._send(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 39, in sender\n    await send(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\uvicorn\\protocols\\websockets\\websockets_impl.py", line 345, in asgi_send\n    raise ClientDisconnected from exc\nuvicorn.protocols.utils.ClientDisconnected\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 89, in send\n    raise WebSocketDisconnect(code=1006)\nstarlette.websockets.WebSocketDisconnect\n'}
2025-08-26 19:18:03,917 - BroadAxis - ERROR - Error occurred: {'error_type': 'WebSocketDisconnect', 'message': '', 'context': {'operation': 'websocket_progress_update'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 1279, in close_connection\n    await self.transfer_data_task\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 286, in __await__\n    yield self  # This tells Task to wait for completion.\n    ^^^^^^^^^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 375, in __wakeup\n    future.result()\n    ~~~~~~~~~~~~~^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 194, in result\n    raise self._make_cancelled_error()\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 306, in __step_run_and_handle_result\n    result = coro.throw(exc)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 956, in transfer_data\n    await asyncio.shield(self._put_message_waiter)\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 286, in __await__\n    yield self  # This tells Task to wait for completion.\n    ^^^^^^^^^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\tasks.py", line 375, in __wakeup\n    future.result()\n    ~~~~~~~~~~~~~^^\n  File "C:\\Users\\rohka\\AppData\\Local\\Programs\\Python\\Python313\\Lib\\asyncio\\futures.py", line 194, in result\n    raise self._make_cancelled_error()\nasyncio.exceptions.CancelledError\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\uvicorn\\protocols\\websockets\\websockets_impl.py", line 332, in asgi_send\n    await self.send(data)  # type: ignore[arg-type]\n    ^^^^^^^^^^^^^^^^^^^^^\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 620, in send\n    await self.ensure_open()\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\websockets\\legacy\\protocol.py", line 921, in ensure_open\n    raise self.connection_closed_exc()\nwebsockets.exceptions.ConnectionClosedError: sent 1011 (internal error) keepalive ping timeout; no close frame received\n\nThe above exception was the direct cause of the following exception:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 86, in send\n    await self._send(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\_exception_handler.py", line 39, in sender\n    await send(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\uvicorn\\protocols\\websockets\\websockets_impl.py", line 345, in asgi_send\n    raise ClientDisconnected from exc\nuvicorn.protocols.utils.ClientDisconnected\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\mcp_interface.py", line 285, in execute_tool_with_progress\n    await send_message_callback(\n    ...<9 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 89, in send\n    raise WebSocketDisconnect(code=1006)\nstarlette.websockets.WebSocketDisconnect\n'}
2025-08-26 19:18:03,919 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'operation': 'websocket_send_message'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:03,921 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'operation': 'websocket_generation_update'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\mcp_interface.py", line 320, in process_query_with_anthropic\n    await send_message_callback(\n    ...<9 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:11,436 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 19:18:11,439 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'operation': 'websocket_send_message'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:11,441 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'session_id': 'ws_1778749769040_1756244282', 'query_length': 23}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 161, in websocket_chat\n    await manager.send_personal_message(\n    ...<7 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:11,442 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'operation': 'websocket_send_message'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 161, in websocket_chat\n    await manager.send_personal_message(\n    ...<7 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:11,444 - BroadAxis - ERROR - Error occurred: {'error_type': 'RuntimeError', 'message': 'Cannot call "send" once a close message has been sent.', 'context': {'session_id': 'ws_1778749769040_1756244282', 'operation': 'websocket_message_handling'}, 'traceback': 'Traceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 161, in websocket_chat\n    await manager.send_personal_message(\n    ...<7 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 195, in websocket_chat\n    await manager.send_personal_message(\n    ...<6 lines>...\n    )\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\backend\\websocket_api.py", line 30, in send_personal_message\n    await websocket.send_text(message)\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 166, in send_text\n    await self.send({"type": "websocket.send", "text": data})\n  File "C:\\Users\\rohka\\OneDrive\\Desktop\\ba-rfpapp\\venv\\Lib\\site-packages\\starlette\\websockets.py", line 98, in send\n    raise RuntimeError(\'Cannot call "send" once a close message has been sent.\')\nRuntimeError: Cannot call "send" once a close message has been sent.\n'}
2025-08-26 19:18:11,819 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 19:18:33,287 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
2025-08-26 19:18:36,816 - httpx - INFO - HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
